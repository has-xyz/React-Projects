(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{56:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(8),r=c.n(s),a=c(3),l=c(5),i=c(24),o=c(26),u=Object(l.b)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL":return t.payload;case"CREATE":return[].concat(Object(o.a)(e),[t.payload]);case"DELETE":return e.filter((function(e){return e._id!==t.payload}));default:return e}}}),d=c(10),j=c(4),b=c.n(j),O=c(11),h=c(12),p=c.n(h),f="https://hasan-blog-server.herokuapp.com/posts",x=function(e){return p.a.delete("".concat(f,"/").concat(e))},v=c(7),m=c(1);function g(e){var t=e.currentId,c=e.setCurrentId,s=Object(n.useState)({title:"",body:""}),r=Object(d.a)(s,2),l=r[0],i=r[1],o=Object(a.c)((function(e){return t?e.posts.find((function(e){return e._id===t})):null})),u=Object(a.b)();Object(n.useEffect)((function(){o&&i(o)}),[o]);var j=function(){c(null),i({title:"",body:""})};return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{className:"title has-text-centered",children:"Blog Form"}),Object(m.jsx)("div",{className:"columns is-centered",children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u(function(e){return function(){var t=Object(O.a)(b.a.mark((function t(c){var n,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r=e,p.a.post(f,r);case 3:n=t.sent,s=n.data,c({type:"CREATE",payload:s}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.message);case 11:case"end":return t.stop()}var r}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(l)),j()},className:"form column",children:[Object(m.jsx)("div",{className:"field is-fullwidth",children:Object(m.jsx)("p",{className:"control",children:Object(m.jsx)("input",{className:"input",type:"text",placeholder:"Blog title",name:"title",value:l.title,onChange:function(e){return i(Object(v.a)(Object(v.a)({},l),{},{title:e.target.value}))}})})}),Object(m.jsx)("div",{className:"field",children:Object(m.jsx)("p",{className:"control",children:Object(m.jsx)("textarea",{className:"textarea",placeholder:"Blog message",name:"body",value:l.body,onChange:function(e){return i(Object(v.a)(Object(v.a)({},l),{},{body:e.target.value}))}})})}),Object(m.jsx)("div",{className:"field",children:Object(m.jsx)("p",{className:"control",children:Object(m.jsx)("button",{className:"button is-success is-fullwidth",type:"submit",children:"Post"})})})]})})]})}var y=c(25),N=c.n(y);function E(e){var t=e.post,c=(e.setCurrentId,e.key,Object(a.b)());return Object(m.jsx)("div",{className:"card article has-text-centered",children:Object(m.jsxs)("div",{class:"card-content",children:[Object(m.jsx)("div",{class:"media",children:Object(m.jsxs)("div",{class:"media-content has-text-centered",children:[Object(m.jsx)("p",{class:"title article-title",children:t.title}),Object(m.jsxs)("div",{class:"tags has-addons level-item",children:[Object(m.jsxs)("span",{class:"tag is-rounded is-info",children:["@",t.user]}),Object(m.jsx)("span",{class:"tag is-rounded",children:N()(t.createdAt).fromNow()})]})]})}),Object(m.jsx)("div",{class:"content article-body",children:Object(m.jsx)("p",{children:t.body})}),Object(m.jsx)("button",{className:"button is-danger is-fullwidth",onClick:function(){return c((e=t._id,function(){var t=Object(O.a)(b.a.mark((function t(c){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x(e);case 3:c({type:"DELETE",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()));var e},children:"DELETE POST"})]})},t._id)}function C(e){var t=e.setCurrentId,c=Object(a.c)((function(e){return e.posts}));return console.log("Current Posts: ",c),c.length?Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("section",{className:"articles",children:Object(m.jsx)("div",{className:"columns is-centered",children:Object(m.jsx)("div",{className:"column",children:c.map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(E,{post:e,setCurrentId:t},e._id),Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]})}))})})})}):null}function w(){var e=Object(a.b)(),t=Object(n.useState)(null),c=Object(d.a)(t,2),s=c[0],r=c[1],l=Object(a.c)((function(e){return e.posts}));return console.log("Current Posts: ",l),Object(n.useEffect)((function(){e(function(){var e=Object(O.a)(b.a.mark((function e(t){var c,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get(f);case 3:c=e.sent,n=c.data,t({type:"FETCH_ALL",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[s,e]),Object(m.jsxs)("div",{children:[Object(m.jsx)(g,{currentId:s,setCurrentId:r}),Object(m.jsx)("hr",{}),Object(m.jsx)(C,{setCurrentId:r})]})}function k(){return Object(m.jsx)("div",{children:Object(m.jsx)(w,{})})}var I=Object(l.d)(u,Object(l.c)(Object(l.a)(i.a)));r.a.render(Object(m.jsx)(a.a,{store:I,children:Object(m.jsx)(k,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.b94ef1be.chunk.js.map